#!/bin/sh
set -eu
test -n "${1-}" || {
    find $HOME/x/con -printf "%P "
    echo
    exit
}

! test "$1" = "add" || {
    if expr "$2" : '/.*' &>/dev/null;
    then
        p=
    else
        p="$PWD/"
    fi
    exec ln -s "$p/$2" $HOME/x/con/${3-}/
}

file=$HOME/x/con/$1
shift

for arg; do printf "%s\000" "$arg"; done | xargs -0 mpv $file
