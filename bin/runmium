#!/bin/sh
set -e

false && {
    exec 1>/tmp/chro.out
    exec 2>/tmp/chro.err
} || {
    exec 1>&2 2>/dev/null
}

pgrep chromium || {
    xdotool search --sync --onlyvisible --maxdepth 2 \
            --name chromium windowsize 1667 1113 windowactivate &

    ulimit -s 1024
    exec chromium --proxy-server=socks5://localhost:9050 "$@"
} && {
    xdotool search --sync --onlyvisible --maxdepth 2 \
            --name chromium windowsize 1667 1113 windowactivate
}
