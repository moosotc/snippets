#!/bin/sh

# http://pastebin.com/kQKU8W0f

eval $(xdotool getdisplaygeometry --shell)
dispw="$WIDTH"
disph="$HEIGHT"

wid=$(xdotool getactivewindow)
eval $(xdotool getwindowgeometry --shell $wid)
winw="$WIDTH"
winh="$HEIGHT"

dispw=$((dispw-x))
disph=$((disph-y))

unset HEIGHT
eval $(xdotool search --class i3bar getwindowgeometry --shell)
i3barh=$HEIGHT                  # i3bar height
i3titleheight=26

eval $(xdotool search --class tint2 getwindowgeometry --shell)
tint2y=$Y

bw=$(xwininfo -id $wid | grep "Relative upper-left X:" | cut -d: -f2)
ty=$((i3barh+i3titleheight))
by=$((tint2y-winh-bw))
cx=$((dispw/2-winw/2))
cy=$((disph/2-winh/2-bw))

case "$1" in
    "7") x=0;               y=$ty;;
    "8") x=$cx;             y=$ty;;
    "9") x=$((dispw-winw)); y=$ty;;

    "4") x=0;               y=$cy;;
    "5") x=$cx;             y=$cy;;
    "6") x=$((dispw-winw)); y=$cy;;

    "1") x=0;               y=$by;;
    "2") x=$cx;             y=$by;;
    "3") x=$((dispw-winw)); y=$by;;
      *) x=-10;             y=-10;;
esac

xdotool windowmove $wid $x $y
